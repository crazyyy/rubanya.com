function flowplus(t){function e(t){var i=o.getKeyCode(t);switch(i){case 39:o.handle(-1);break;case 37:o.handle(1)}}this.defaults={aspectRatio:1.9,autoRotate:"off",autoRotatepause:3e3,focus:4,imagesCursor:"pointer",reflectPC:1,sameWindow:!1,sliderWidth:14,startImg:1,sliderCursor:"default"},this.ifp_flowplusdiv="wpif2_flowplus_"+t,this.ifp_loadingdiv="wpif2_loading_"+t,this.ifp_imagesdiv="wpif2_images_"+t,this.ifp_captionsdiv="wpif2_captions_"+t,this.ifp_sliderdiv="wpif2_slider_"+t,this.ifp_scrollbardiv="wpif2_scrollbar_"+t,this.ifp_overlaydiv="wpif2_overlay",this.ifp_overlayclosediv="wpif2_overlayclose",this.ifp_topboxdiv="wpif2_topbox",this.ifp_topboximgdiv="wpif2_topboximg",this.ifp_topboxcaptiondiv="wpif2_topboxcaption",this.ifp_topboxprevdiv="wpif2_topboxprev",this.ifp_topboxclosediv="wpif2_topboxclose",this.ifp_topboxnextdiv="wpif2_topboxnext",this.image_id=0,this.new_image_id=0,this.current=0,this.target=0,this.mem_target=0,this.timer=0,this.array_images=[],this.ifp_slider_width=0,this.new_slider_pos=0,this.dragging=!1,this.dragobject=null,this.dragx=0,this.posx=0,this.new_posx=0,this.xstep=150,this.autorotate="off",this.rotatestarted="false",this.first_refresh=!0;var o=this;if(this.init=function(t){for(var i in o.defaults)this[i]=void 0!==t&&void 0!==t[i]?t[i]:o.defaults[i]},this.show=function(t){var i=document.getElementById(t);i.style.visibility="visible"},this.hide=function(t){var i=document.getElementById(t);i.style.visibility="hidden",i.style.display="none"},this.step=function(){o.target<o.current-1||o.target>o.current+1?(o.moveTo(o.current+(o.target-o.current)/3),setTimeout(o.step,50),o.timer=1):o.timer=0},this.glideTo=function(t){if(!(this.max<=1)){var i=-t*this.xstep;this.target=i,this.mem_target=i,0==this.timer&&(window.setTimeout(o.step,50),this.timer=1),this.image_id=t;var e=this.imgs_div.childNodes.item(this.array_images[this.image_id]).childNodes.item(0).getAttribute("alt");""==e&&(e="&nbsp;"),this.caption_div.innerHTML=e,this.dragging===!1&&(this.new_slider_pos=this.scrollbar_width*-(100*i/((this.max-1)*this.xstep))/100-this.new_posx,this.slider_div.style.marginLeft=this.new_slider_pos-this.ifp_slider_width+"px")}},this.rotate=function(){"on"==o.autorotate&&(o.image_id>=o.max-1?o.glideTo(0):o.glideTo(o.image_id+1)),"on"==o.autoRotate&&window.setTimeout(o.rotate,o.autoRotatepause)},this.moveTo=function(t){this.current=t;for(var i=this.max,e=0;e<this.max;e++){var s=this.imgs_div.childNodes.item(this.array_images[e]),n=s.childNodes.item(0),d=e*-this.xstep;if(d+this.max_focus<this.mem_target||d-this.max_focus>this.mem_target)s.style.visibility="hidden",s.style.display="none";else{var h=Math.sqrt(1e4+t*t)+100,r=t/h*this.size+this.size;s.style.display="block";var l=s.pc;s.i==o.image_id&&(l=120);var a,u,c=Math.round(s.h/s.w*l/h*this.size);a=Math.round(l/h*this.size);var u=Math.round(this.images_height-c/(1+this.reflectPC));switch(s.style.left=Math.round(r-l/2/h*this.size)+"px",a&&c&&(s.style.height=c+"px",s.style.width=a+"px",s.style.top=u+"px",n.style.width=a+"px",n.style.height="auto"),s.style.visibility="visible",t<0?i++:i-=1,s.i==o.image_id){case!1:s.onclick=function(){return o.autorotate="off",o.glideTo(this.i),!1},jQuery(s).removeClass("wpif2-centered");break;default:i+=1,jQuery(s).addClass("wpif2-centered"),n.getAttribute("data-style")&&"wpif2_lightbox"==n.getAttribute("data-style")?(n.setAttribute("title",n.getAttribute("alt")),s.onclick=function(){return o.autoRotate="off",o.showTop(this),!1}):this.sameWindow?s.onclick=function(){return window.location=this.url,!1}:s.onclick=function(){return window.open(this.url),!1}}s.style.zIndex=i}t+=this.xstep}},this.refresh=function(t){if(!this.first_refresh||t){this.first_refresh=!1,this.flowplus_div=document.getElementById(this.ifp_flowplusdiv),this.imgs_div=document.getElementById(this.ifp_imagesdiv),this.scrollbar_div=document.getElementById(this.ifp_scrollbardiv),this.slider_div=document.getElementById(this.ifp_sliderdiv),this.caption_div=document.getElementById(this.ifp_captionsdiv),this.images_width=this.imgs_div.offsetWidth,this.images_top=this.flowplus_div.offsetTop,this.images_left=this.flowplus_div.offsetLeft,this.max_focus=this.focus*this.xstep,this.size=.5*this.images_width,this.scrollbar_width=Math.round(.6*this.images_width),this.ifp_slider_width=.5*this.sliderWidth,this.max_height=Math.round(o.images_width/o.aspectRatio),this.flowplus_div.onmouseover=function(){return o.autorotate="off",!1},this.flowplus_div.onmouseout=function(){return o.autorotate=o.autoRotate,!1},this.flowplus_div.style.height=this.max_height+"px",this.images_height=Math.round(.67*o.max_height),this.imgs_div.style.height=this.images_height+"px",this.caption_div.style.width=this.images_width+"px",this.caption_div.style.marginTop=.03*this.images_width+"px",this.scrollbar_div.style.marginTop=.02*this.images_width+"px",this.scrollbar_div.style.marginLeft=.2*this.images_width+"px",this.scrollbar_div.style.width=this.scrollbar_width+"px",this.scrollbar_left=this.scrollbar_div.offsetLeft,this.scrollbar_right=this.scrollbar_div.offsetLeft+this.scrollbar_div.offsetWidth,this.slider_div.onmousedown=function(){return o.dragstart(this),!1},this.slider_div.style.cursor=this.sliderCursor,this.max=this.imgs_div.childNodes.length;for(var i=0,e=0;e<this.max;e++){var s=this.imgs_div.childNodes.item(e);if(1==s.nodeType&&"NOSCRIPT"!=s.nodeName){this.array_images[i]=e;var n=s.childNodes.item(0);s.onclick=function(){return o.autoRotate="off",o.glideTo(this.i),!1},s.x_pos=-i*this.xstep,s.i=i,t===!0&&(s.w=s.clientWidth,s.h=s.clientHeight),s.w+1>s.h?s.pc=118:s.pc=100,s.url=n.getAttribute("data-link"),n.getAttribute("data-style")&&"wpif2_lightbox"==n.getAttribute("data-style")?(s.setAttribute("title",n.getAttribute("alt")),s.ondblclick=function(){return o.autoRotate="off",o.showTop(this),!1}):this.sameWindow?s.ondblclick=function(){window.location=this.url}:s.ondblclick=function(){window.open(this.url)},s.style.cursor=this.imagesCursor,i++}}this.max=this.array_images.length,this.startImg>0&&this.startImg<=this.max&&(this.image_id=this.startImg-1,this.mem_target=-this.image_id*this.xstep,this.current=this.mem_target),this.moveTo(this.current),this.glideTo(this.image_id),this.autorotate=this.autoRotate,"on"==this.autorotate&&"false"==this.rotatestarted&&(window.setTimeout(o.rotate,o.autoRotatepause),this.rotatestarted="true")}},this.loaded=function(){if(document.getElementById(o.ifp_flowplusdiv)){if(null===document.getElementById(o.ifp_overlaydiv)){var t=document.getElementsByTagName("body").item(0),i=document.createElement("div");i.setAttribute("id",o.ifp_overlaydiv),i.onclick=function(){return o.closeTop(),!1},t.appendChild(i),jQuery("#"+o.ifp_overlaydiv).fadeTo("fast",.7);var e=document.createElement("div");e.setAttribute("id",o.ifp_topboxdiv),t.appendChild(e);var s=document.createElement("img");s.setAttribute("id",o.ifp_topboximgdiv),e.appendChild(s);var n=document.createElement("a");n.setAttribute("id",o.ifp_topboxprevdiv),n.setAttribute("href","#"),e.appendChild(n);var d=document.createElement("a");d.setAttribute("id",o.ifp_topboxnextdiv),d.setAttribute("href","#"),e.appendChild(d);var h=document.createElement("div");h.setAttribute("id",o.ifp_topboxcaptiondiv),e.appendChild(h);var r=document.createElement("a");r.setAttribute("id",o.ifp_topboxclosediv),r.setAttribute("href","#"),e.appendChild(r),r.onclick=function(){return o.closeTop(),!1},r.innerHTML="Close"}o.hide(o.ifp_loadingdiv),o.refresh(!0),o.show(o.ifp_imagesdiv),o.show(o.ifp_scrollbardiv),o.initMouseWheel(),o.initMouseDrag(),o.Touch.touch_init()}},this.unloaded=function(){document=null},this.handle=function(t){var i=!1;t>0?this.image_id>=1&&(this.target=this.target+this.xstep,this.new_image_id=this.image_id-1,i=!0):this.image_id<this.max-1&&(this.target=this.target-this.xstep,this.new_image_id=this.image_id+1,i=!0),i===!0&&(this.glideTo(this.new_image_id),this.autorotate="off")},this.wheel=function(t){var i=0;t||(t=window.event),t.wheelDelta?i=t.wheelDelta/120:t.detail&&(i=-t.detail/3),i&&o.handle(i),t.preventDefault&&t.preventDefault(),t.returnValue=!1},this.initMouseWheel=function(){window.addEventListener&&this.flowplus_div.addEventListener("DOMMouseScroll",this.wheel,!1),this.flowplus_div.onmousewheel=this.wheel},this.dragstart=function(t){o.dragobject=t,o.dragx=o.posx-o.dragobject.offsetLeft+o.new_slider_pos,o.autorotate="off"},this.dragstop=function(){o.dragobject=null,o.dragging=!1},this.drag=function(t){if(o.posx=document.all?window.event.clientX:t.pageX,null!=o.dragobject){o.dragging=!0,o.new_posx=o.posx-o.dragx+o.ifp_slider_width,o.new_posx<-o.new_slider_pos&&(o.new_posx=-o.new_slider_pos),o.new_posx>o.scrollbar_width-o.new_slider_pos&&(o.new_posx=o.scrollbar_width-o.new_slider_pos);var i=o.new_posx+o.new_slider_pos,e=i/(o.scrollbar_width/(o.max-1)),s=Math.round(e),n=(s*-o.xstep,s);o.dragobject.style.left=o.new_posx+"px",o.glideTo(n)}},this.initMouseDrag=function(){o.flowplus_div.onmousemove=o.drag,o.flowplus_div.onmouseup=o.dragstop,document.onselectstart=function(){return o.dragging!==!0}},this.getKeyCode=function(t){return t=t||window.event,t.keyCode},this.Touch={triggerElementID:null,fingerCount:0,startX:0,startY:0,curX:0,curY:0,deltaX:0,deltaY:0,horzDiff:0,vertDiff:0,minLength:10,swipeLength:0,swipeAngle:null,swipeDirection:null,touch_init:function(){o.slider_div.ontouchstart=function(t){return o.Touch.touch_start(t,o.ifp_sliderdiv),!1},o.slider_div.ontouchend=function(t){return o.Touch.touch_end(t),!1},o.slider_div.ontouchmove=function(t){return o.Touch.touch_move(t),!1},o.slider_div.ontouchcancel=function(t){return o.Touch.touch_cancel(t),!1},o.imgs_div.ontouchstart=function(t){return o.Touch.touch_start(t,o.ifp_imagesdiv),!1},o.imgs_div.ontouchend=function(t){return o.Touch.touch_end(t),!1},o.imgs_div.ontouchmove=function(t){return o.Touch.touch_move(t),!1},o.imgs_div.ontouchcancel=function(t){return o.Touch.touch_cancel(t),!1},topbox_div=document.getElementById(o.ifp_topboxdiv),topbox_div.ontouchstart=function(t){return o.Touch.touch_start(t,o.ifp_topboxdiv),!1},topbox_div.ontouchend=function(t){return o.Touch.touch_end(t),!1},topbox_div.ontouchcancel=function(t){return o.Touch.touch_cancel(t),!1}},touch_start:function(t,i){this.touch_reset(t),t.preventDefault(),this.fingerCount=t.touches.length,1==this.fingerCount&&(this.startX=t.touches[0].pageX,this.startY=t.touches[0].pageY,this.triggerElementID=i)},touch_move:function(t){t.preventDefault(),1==t.touches.length&&(this.curX=t.touches[0].pageX,this.curY=t.touches[0].pageY,jQuery(document.getElementById(this.triggerElementID)).hasClass("wpif2_slider")&&this.touch_glide(t))},touch_end:function(t){return t.preventDefault(),this.touch_glide(t),!1},touch_glide:function(t){1==this.fingerCount&&0!=this.curX?(this.swipeLength=Math.round(Math.sqrt(Math.pow(this.curX-this.startX,2)+Math.pow(this.curY-this.startY,2))),this.swipeLength>=this.minLength?(this.calculate_angle(),this.determine_swipe_direction(),this.processing_routine()):this.tap()):this.tap()},touch_reset:function(t){this.fingerCount=0,this.startX=0,this.startY=0,this.curX=0,this.curY=0,this.deltaX=0,this.deltaY=0,this.horzDiff=0,this.vertDiff=0,this.swipeLength=0,this.swipeAngle=null,this.swipeDirection=null,this.triggerElementID=null},calculate_angle:function(){var t=this.startX-this.curX,i=this.curY-this.startY,e=(Math.round(Math.sqrt(Math.pow(t,2)+Math.pow(i,2))),Math.atan2(i,t));this.swipeAngle=Math.round(180*e/Math.PI),this.swipeAngle<0&&(this.swipeAngle=360-Math.abs(this.swipeAngle))},determine_swipe_direction:function(){this.swipeAngle<=45&&this.swipeAngle>=0?this.swipeDirection="left":this.swipeAngle<=360&&this.swipeAngle>=315?this.swipeDirection="left":this.swipeAngle>=135&&this.swipeAngle<=225?this.swipeDirection="right":this.swipeAngle>45&&this.swipeAngle<135?this.swipeDirection="down":this.swipeDirection="up"},processing_routine:function(){var t=document.getElementById(this.triggerElementID);if("left"==this.swipeDirection||"right"==this.swipeDirection){var i;if(this.triggerElementID==o.ifp_topboxdiv){if("left"==this.swipeDirection){var e=document.getElementById(o.ifp_topboxnextdiv);jQuery(e).click()}else if("right"==this.swipeDirection){var e=document.getElementById(o.ifp_topboxprevdiv);jQuery(e).click()}}else jQuery(t).hasClass("wpif2_images")?("left"==this.swipeDirection&&(i=o.image_id+1),"right"==this.swipeDirection&&(i=o.image_id-1),i<0&&(i=0),i>=o.max&&(i=o.max-1),o.glideTo(i)):(i=Math.round(o.max*(this.curX-o.scrollbar_left)/(o.scrollbar_right-o.scrollbar_left)),i<0&&(i=0),i>=o.max&&(i=o.max-1),o.glideTo(i))}},tap:function(){var t=document.getElementById(this.triggerElementID);if(jQuery(t).hasClass("wpif2_images")){var i=o.imgs_div.childNodes.item(o.array_images[o.image_id]),e=i.childNodes.item(0);e.getAttribute("data-style")&&"wpif2_lightbox"==e.getAttribute("data-style")?(o.autoRotate="off",o.showTop(i)):o.sameWindow?window.location=e.getAttribute("data-link"):window.open(e.getAttribute("data-link"))}if(this.triggerElementID==o.ifp_topboxdiv){var s=document.getElementById(o.ifp_topboximgdiv);if(this.startY>=jQuery(s).offset().top+jQuery(s).height())o.closeTop();else if(this.startX>=jQuery(t).offset().left+jQuery(t).width()/2){var n=document.getElementById(o.ifp_topboxnextdiv);jQuery(n).click()}else{var n=document.getElementById(o.ifp_topboxprevdiv);jQuery(n).click()}}}},this.getPageScroll=function(){var t,i;return self.pageYOffset?(i=self.pageYOffset,t=self.pageXOffset):document.documentElement&&document.documentElement.scrollTop?(i=document.documentElement.scrollTop,t=document.documentElement.scrollLeft):document.body&&(i=document.body.scrollTop,t=document.body.scrollLeft),arrayPageScroll=new Array(t,i),arrayPageScroll},this.getPageSize=function(){var t,i;window.innerHeight&&window.scrollMaxY?(t=window.innerWidth+window.scrollMaxX,i=window.innerHeight+window.scrollMaxY):document.body.scrollHeight>document.body.offsetHeight?(t=document.body.scrollWidth,i=document.body.scrollHeight):document.documentElement.scrollHeight>document.body.offsetHeight?(t=document.documentElement.scrollWidth,i=document.documentElement.scrollHeight):(t=document.body.offsetWidth,i=document.body.offsetHeight);var e,o;return self.innerHeight?(e=document.documentElement.clientWidth?document.documentElement.clientWidth:self.innerWidth,o=self.innerHeight):document.documentElement&&document.documentElement.clientHeight?(e=document.documentElement.clientWidth,o=document.documentElement.clientHeight):document.body&&(e=document.body.clientWidth,o=document.body.clientHeight),i<o?pageHeight=o:pageHeight=i,t<e?pageWidth=t:pageWidth=e,arrayPageSize=new Array(pageWidth,pageHeight,e,o),arrayPageSize},this.showFlash=function(){var t=document.getElementsByTagName("object");for(i=0;i<t.length;i++)t[i].style.visibility="visible";var e=document.getElementsByTagName("embed");for(i=0;i<e.length;i++)e[i].style.visibility="visible"},this.hideFlash=function(){var t=document.getElementsByTagName("object");for(i=0;i<t.length;i++)t[i].style.visibility="hidden";var e=document.getElementsByTagName("embed");for(i=0;i<e.length;i++)e[i].style.visibility="hidden"},this.showTop=function(t){var i=(document.getElementById(this.ifp_topboxdiv),document.getElementById(this.ifp_overlaydiv)),e=document.getElementById(this.ifp_topboximgdiv);this.hideFlash();var s=this.getPageSize();i.style.width=s[0]+"px",i.style.height=s[1]+"px",i.style.display="none",i.style.visibility="visible",jQuery("#"+this.ifp_overlaydiv).show(),e.src=t.url,document.getElementById(this.ifp_topboxcaptiondiv).innerHTML=t.getAttribute("title");var n=new Image;n.onload=function(){o.showImg(t,n,n.width,n.height)},n.src=t.url},this.showImg=function(t,i,e,s){if(0==e||0==s)return void(i.onload=function(){o.showImg(t,i,i.width,i.height)});if("hidden"!=document.getElementById(this.ifp_overlaydiv).style.visibility){var n=document.getElementById(this.ifp_topboxdiv),d=(document.getElementById(this.ifp_overlaydiv),document.getElementById(this.ifp_topboximgdiv)),h=document.getElementById(this.ifp_topboxprevdiv),r=document.getElementById(this.ifp_topboxnextdiv),l=document.getElementById(this.ifp_topboxcaptiondiv);if(d.src=t.url,h.style.visibility="hidden",t.i>0)for(index=t.i-1;index>=0;index--)if(prev_image_block=this.imgs_div.childNodes.item(this.array_images[index]),prev_image=prev_image_block.childNodes.item(0),prev_image.getAttribute("data-style")&&"wpif2_lightbox"==prev_image.getAttribute("data-style")){var a=new Image;a.src=prev_image_block.url,h.onclick=function(){return o.showImg(prev_image_block,a,a.width,a.height),!1},h.style.visibility="visible";break}if(r.style.visibility="hidden",t.i<this.max-1)for(index=t.i+1;index<this.max;index++)if(next_image_block=this.imgs_div.childNodes.item(this.array_images[index]),next_image=next_image_block.childNodes.item(0),next_image.getAttribute("data-style")&&"wpif2_lightbox"==next_image.getAttribute("data-style")){var u=new Image;u.src=next_image_block.url,r.onclick=function(){return o.showImg(next_image_block,u,u.width,u.height),!1},r.style.visibility="visible";break}var c=e,p=s+30;d.width=c;var g="";image=t.childNodes.item(0),image.getAttribute("data-description")&&(g=image.getAttribute("data-description")),g==image.getAttribute("title")&&(g=""),""!=g&&(g="<p>"+g+"</p>"),l.innerHTML=t.getAttribute("title")+g,""!=g&&(jQuery("#"+this.ifp_topboxcaptiondiv).width(c),p+=jQuery("#"+this.ifp_topboxcaptiondiv).height());var m=this.getPageSize(),f=m[2],_=m[3],v=this.getPageScroll();c>f&&(p=Math.floor(p*(f-100)/c),c=f-100,d.width=c),p>_&&(c=Math.floor(c*(_-100)/p),p=_-100,d.width=c),jQuery("#"+this.ifp_topboxcaptiondiv).width(c);var w=Math.floor(.5*(f-c))+v[0],y=Math.floor(.5*(_-p))+v[1];n.style.left=w+"px",n.style.top=y+"px",n.style.width=c+"px",h.style.height=p+"px",r.style.height=p+"px",n.style.display="none",n.style.visibility="visible",jQuery("#"+this.ifp_topboxdiv).fadeIn("slow")}},this.closeTop=function(){document.getElementById(this.ifp_overlaydiv).style.visibility="hidden",document.getElementById(this.ifp_topboxdiv).style.visibility="hidden",document.getElementById(this.ifp_topboxnextdiv).style.visibility="hidden",document.getElementById(this.ifp_topboxprevdiv).style.visibility="hidden",this.showFlash()},null!==document.getElementById(o.ifp_flowplusdiv)){if(o.show(o.ifp_loadingdiv),"function"==typeof window.onunload){var s=window.onunload;window.onunload=function(){o.unloaded(),s()}}else window.onunload=this.unloaded;if("function"==typeof window.onload){var n=window.onload;window.onload=function(){o.loaded(),n()}}else window.onload=o.loaded;if("function"==typeof window.onresize){var d=window.onresize;window.onresize=function(){document.getElementById(o.ifp_flowplusdiv)&&o.refresh(!1),d()}}else window.onresize=function(){document.getElementById(o.ifp_flowplusdiv)&&o.refresh(!1)};if("function"==typeof document.onkeydown){var h=document.onkeydown;document.onkeydown=function(t){e(t),h(t)}}else document.onkeydown=e}}
//# sourceMappingURL=maps/imageflowplus.js.map
