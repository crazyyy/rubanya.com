!function(e,t){e.fn.listautowidth=function(){return this.each(function(){var t=e(this).width(),r=t/e(this).children("li").length;e(this).children("li").each(function(){var t=e(this).outerWidth(!0)-e(this).width();e(this).width(r-t)})})},t.WP_User_Frontend={pass_val:"",retype_pass_val:"",init:function(){this.enableMultistep(this),e(".wpuf-form").on("click","img.wpuf-clone-field",this.cloneField),e(".wpuf-form").on("click","img.wpuf-remove-field",this.removeField),e(".wpuf-form").on("click","a.wpuf-delete-avatar",this.deleteAvatar),e(".wpuf-form").on("click","a#wpuf-post-draft",this.draftPost),e(".wpuf-form-add").on("submit",this.formSubmit),e("form#post").on("submit",this.adminPostSubmit),e(".wpuf-form").on("keyup","#pass1",this.check_pass_strength),this.ajaxCategory(),e(':submit[name="wpuf_cancel_subscription"]').click(function(){if(!confirm("Are you sure you want to cancel your current subscription ?"))return!1})},check_pass_strength:function(){var t,r=e("#pass1").val();if(e("#pass-strength-result").removeClass("short bad good strong"),!r)return void e("#pass-strength-result").html("&nbsp;");if("undefined"!=typeof wp.passwordStrength)switch(t=wp.passwordStrength.meter(r,wp.passwordStrength.userInputBlacklist(),r)){case 2:e("#pass-strength-result").addClass("bad").html(pwsL10n.bad);break;case 3:e("#pass-strength-result").addClass("good").html(pwsL10n.good);break;case 4:e("#pass-strength-result").addClass("strong").html(pwsL10n.strong);break;case 5:e("#pass-strength-result").addClass("short").html(pwsL10n.mismatch);break;default:e("#pass-strength-result").addClass("short").html(pwsL10n["short"])}},enableMultistep:function(t){var r=this,s=0,n=e(':hidden[name="wpuf_multistep_type"]').val();if(null!=n){if(e("fieldset.wpuf-multistep-fieldset").find(".wpuf-multistep-prev-btn").first().remove(),e("fieldset.wpuf-multistep-fieldset").find(".wpuf-multistep-next-btn").last().remove(),e(".wpuf-form fieldset").removeClass("field-active").first().addClass("field-active"),"progressive"==n&&0!=e(".wpuf-form .wpuf-multistep-fieldset").length){e("fieldset.wpuf-multistep-fieldset legend").first(),e(".wpuf-multistep-progressbar").html('<div class="wpuf-progress-percentage"></div>');var i=e(".wpuf-multistep-progressbar"),a=e(".wpuf-progress-percentage");e(".wpuf-multistep-progressbar").progressbar({change:function(){a.text(i.progressbar("value")+"%")}}),e(".wpuf-multistep-fieldset legend").hide()}else e(".wpuf-form").each(function(){var t=e(this),r=e(".wpuf-multistep-progressbar",t),s="";r.addClass("wizard-steps"),s+='<ul class="wpuf-step-wizard">',e(".wpuf-multistep-fieldset",this).each(function(){s+="<li>"+e.trim(e("legend",this).text())+"</li>",e("legend",this).hide()}),s+="</ul>",r.append(s),e(".wpuf-step-wizard li",r).first().addClass("active-step"),e(".wpuf-step-wizard",r).listautowidth()});this.change_fieldset(s,n),e("fieldset .wpuf-multistep-prev-btn, fieldset .wpuf-multistep-next-btn").click(function(i){if(e(this).hasClass("wpuf-multistep-next-btn")){var a=r.formStepCheck("",e(this).closest("fieldset"));0!=a&&t.change_fieldset(++s,n)}else e(this).hasClass("wpuf-multistep-prev-btn")&&t.change_fieldset(--s,n);return!1})}},change_fieldset:function(t,r){e("fieldset.wpuf-multistep-fieldset").removeClass("field-active").eq(t).addClass("field-active"),e(".wpuf-step-wizard li").each(function(){e(this).index()<=t?"step_by_step"==r?e(this).addClass("passed-wpuf-ms-bar"):e(".wpuf-ps-bar",this).addClass("passed-wpuf-ms-bar"):"step_by_step"==r?e(this).removeClass("passed-wpuf-ms-bar"):e(".wpuf-ps-bar",this).removeClass("passed-wpuf-ms-bar")}),e(".wpuf-step-wizard li").removeClass("wpuf-ms-bar-active active-step completed-step"),e(".passed-wpuf-ms-bar").addClass("completed-step").last().addClass("wpuf-ms-bar-active"),e(".wpuf-ms-bar-active").addClass("active-step");var s=e("fieldset.wpuf-multistep-fieldset").eq(t).find("legend").text();if(s=e.trim(s),"progressive"==r&&0!=e(".wpuf-form .wpuf-multistep-fieldset").length){var n=100*(t+1)/e("fieldset.wpuf-multistep-fieldset").length,n=Number(n.toFixed(2));e(".wpuf-multistep-progressbar").progressbar({value:n}),e(".wpuf-progress-percentage").text(s+" ("+n+"%)")}e(".wpuf-form").trigger("step-change-fieldset")},ajaxCategory:function(){var t=".cat-ajax",r=".category-wrap";e(r).on("change",t,function(){currentLevel=parseInt(e(this).parent().attr("level")),WP_User_Frontend.getChildCats(e(this),"lvl",currentLevel+1,r,"category")})},getChildCats:function(t,r,s,n,i){cat=e(t).val(),results_div=r+s,i="undefined"!=typeof i?i:"category",field_attr=e(t).siblings("span").data("taxonomy"),e.ajax({type:"post",url:wpuf_frontend.ajaxurl,data:{action:"wpuf_get_child_cat",catID:cat,nonce:wpuf_frontend.nonce,field_attr:field_attr},beforeSend:function(){e(t).parent().parent().next(".loading").addClass("wpuf-loading")},complete:function(){e(t).parent().parent().next(".loading").removeClass("wpuf-loading")},success:function(n){e(t).parent().nextAll().each(function(){e(this).remove()}),""!=n&&(e(t).parent().addClass("hasChild").parent().append('<div id="'+r+s+'" level="'+s+'"></div>'),t.parent().parent().find("#"+results_div).html(n).slideDown("fast"))}})},cloneField:function(t){t.preventDefault();var r=e(this).closest("tr"),s=r.clone();s.find("input").val(""),s.find(":checked").attr("checked",""),r.after(s)},removeField:function(){var t=e(this).closest("tr"),r=t.siblings().andSelf().length;r>1&&t.remove()},adminPostSubmit:function(t){t.preventDefault();var r=e(this),s=WP_User_Frontend.validateForm(r);if(s)return!0},draftPost:function(t){t.preventDefault();var r,s,n=e(this),i=e(this).closest("form"),a=i.serialize()+"&action=wpuf_draft_post",o=i.find('input[type="hidden"][name="post_id"]').val(),d=[];e(".wpuf-rich-validation").each(function(t,n){r=e(n).data("id"),s=e.trim(tinyMCE.get(r).getContent()),d.push(r+"="+encodeURIComponent(s))}),a=a+"&"+d.join("&"),n.after(' <span class="wpuf-loading"></span>'),e.post(wpuf_frontend.ajaxurl,a,function(t){if("undefined"==typeof o){var r='<input type="hidden" name="post_id" value="'+t.post_id+'">';r+='<input type="hidden" name="post_date" value="'+t.date+'">',r+='<input type="hidden" name="post_author" value="'+t.post_author+'">',r+='<input type="hidden" name="comment_status" value="'+t.comment_status+'">',i.append(r)}n.next("span.wpuf-loading").remove(),n.after('<span class="wpuf-draft-saved">&nbsp; Post Saved</span>'),e(".wpuf-draft-saved").delay(2500).fadeOut("fast",function(){e(this).remove()})})},formStepCheck:function(e,t){var r=t;return r.find("input[type=submit]"),form_data=WP_User_Frontend.validateForm(r),0==form_data&&WP_User_Frontend.addErrorNotice(self,"bottom"),form_data},formSubmit:function(r){r.preventDefault();var s=e(this),n=s.find("input[type=submit]");form_data=WP_User_Frontend.validateForm(s),form_data&&(s.find("li.wpuf-submit").append('<span class="wpuf-loading"></span>'),n.attr("disabled","disabled").addClass("button-primary-disabled"),e.post(wpuf_frontend.ajaxurl,form_data,function(r){if(r.success)e("body").trigger("wpuf:postform:success",r),1==r.show_message?(s.before('<div class="wpuf-success">'+r.message+"</div>"),s.slideUp("fast",function(){s.remove()}),e("html, body").animate({scrollTop:e(".wpuf-success").offset().top-100},"fast")):t.location=r.redirect_to;else{if("undefined"!=typeof r.type&&"login"===r.type)return void(confirm(r.error)?t.location=r.redirect_to:(n.removeAttr("disabled"),n.removeClass("button-primary-disabled"),s.find("span.wpuf-loading").remove()));alert(r.error),n.removeAttr("disabled")}n.removeClass("button-primary-disabled"),s.find("span.wpuf-loading").remove()}))},validateForm:function(t){var r=!1;error_type="",WP_User_Frontend.removeErrors(t),WP_User_Frontend.removeErrorNotice(t);var s=t.find('[data-required="yes"]:visible');if(s.each(function(t,s){var n=e(s).data("type");switch(o="",n){case"rich":var i=e(s).data("id");o=e.trim(tinyMCE.get(i).getContent()),""===o&&(r=!0,WP_User_Frontend.markError(s));break;case"textarea":case"text":if(e(s).hasClass("password")&&(""==WP_User_Frontend.pass_val?WP_User_Frontend.pass_val=e(s).val():WP_User_Frontend.retype_pass_val=e(s).val(),""!=WP_User_Frontend.pass_val&&""!=WP_User_Frontend.retype_pass_val&&WP_User_Frontend.pass_val!=WP_User_Frontend.retype_pass_val)){r=!0,error_type="mismatch",WP_User_Frontend.markError(s,error_type);break}o=e.trim(e(s).val()),""===o&&(r=!0,error_type="required",WP_User_Frontend.markError(s,error_type));break;case"select":o=e(s).val(),o&&"-1"!==o||(r=!0,error_type="required",WP_User_Frontend.markError(s,error_type));break;case"multiselect":o=e(s).val(),null!==o&&0!==o.length||(r=!0,error_type="required",WP_User_Frontend.markError(s,error_type));break;case"tax-checkbox":var a=e(s).children().find("input:checked").length;a||(r=!0,error_type="required",WP_User_Frontend.markError(s,error_type));break;case"radio":var a=e(s).find("input:checked").length;a||(r=!0,error_type="required",WP_User_Frontend.markError(s,error_type));break;case"file":var a=e(s).find("ul").children().length;a||(r=!0,error_type="required",WP_User_Frontend.markError(s,error_type));break;case"email":var o=e(s).val();""!==o?WP_User_Frontend.isValidEmail(o)||(r=!0,error_type="validation",WP_User_Frontend.markError(s,error_type)):""===o&&(r=!0,error_type="required",WP_User_Frontend.markError(s,error_type));break;case"url":var o=e(s).val();""!==o&&(WP_User_Frontend.isValidURL(o)||(r=!0,error_type="validation",WP_User_Frontend.markError(s,error_type)))}}),r)return WP_User_Frontend.addErrorNotice(t,"end"),!1;var n=t.serialize(),i=[];return e(".wpuf-rich-validation",t).each(function(t,r){var r=e(r),s=r.data("id"),n=r.data("name"),a=e.trim(tinyMCE.get(s).getContent());i.push(n+"="+encodeURIComponent(a))}),n=n+"&"+i.join("&")},addErrorNotice:function(t,r){"bottom"==r?e(".wpuf-multistep-fieldset:visible").append('<div class="wpuf-errors">'+wpuf_frontend.error_message+"</div>"):e(t).find("li.wpuf-submit").append('<div class="wpuf-errors">'+wpuf_frontend.error_message+"</div>")},removeErrorNotice:function(t){e(t).find(".wpuf-errors").remove()},markError:function(t,r){var s="";if(e(t).closest("li").addClass("has-error"),r){switch(s=e(t).closest("li").data("label"),r){case"required":s=s+" "+error_str_obj[r];break;case"mismatch":s=s+" "+error_str_obj[r];break;case"validation":s=s+" "+error_str_obj[r]}e(t).siblings(".wpuf-error-msg").remove(),e(t).after('<div class="wpuf-error-msg">'+s+"</div>")}e(t).focus()},removeErrors:function(t){e(t).find(".has-error").removeClass("has-error"),e(".wpuf-error-msg").remove()},isValidEmail:function(e){var t=new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i);return t.test(e)},isValidURL:function(e){var t=new RegExp("^(http://www.|https://www.|ftp://www.|www.|http://|https://){1}([0-9A-Za-z]+.)");return t.test(e)},insertImage:function(t,r){var s="wpuf-insert-image-container";if(e("#"+t).length){var n=new plupload.Uploader({runtimes:"html5,html4",browse_button:t,container:s,multipart:!0,multipart_params:{action:"wpuf_insert_image",form_id:e("#"+t).data("form_id")},multiple_queues:!1,multi_selection:!1,urlstream_upload:!0,file_data_name:"wpuf_file",max_file_size:"2mb",url:wpuf_frontend_upload.plupload.url,flash_swf_url:wpuf_frontend_upload.flash_swf_url,filters:[{title:"Allowed Files",extensions:"jpg,jpeg,gif,png,bmp"}]});n.bind("Init",function(e,t){}),n.bind("FilesAdded",function(t,r){var n=e("#"+s);e.each(r,function(e,t){n.append('<div class="upload-item" id="'+t.id+'"><div class="progress progress-striped active"><div class="bar"></div></div></div>')}),t.refresh(),t.start()}),n.bind("QueueChanged",function(e){n.start()}),n.bind("UploadProgress",function(t,r){var s=e("#"+r.id);e(".bar",s).css({width:r.percent+"%"}),e(".percent",s).html(r.percent+"%")}),n.bind("Error",function(e,t){alert("Error #"+t.code+": "+t.message)}),n.bind("FileUploaded",function(t,s,n){if(e("#"+s.id).remove(),"error"!==n.response){if("undefined"!=typeof tinyMCE)if("function"!=typeof tinyMCE.execInstanceCommand){var i=tinyMCE.get("post_content_"+r);null!==i&&i.insertContent(n.response)}else tinyMCE.execInstanceCommand("post_content_"+r,"mceInsertContent",!1,n.response);var a=e("#post_content_"+r);a.val(a.val()+n.response)}else alert("Something went wrong")}),n.init()}},deleteAvatar:function(t){t.preventDefault(),confirm(e(this).data("confirm"))&&e.post(wpuf_frontend.ajaxurl,{action:"wpuf_delete_avatar",_wpnonce:wpuf_frontend.nonce},function(){e(t.target).parent().remove()})},editorLimit:{bind:function(t,r,s){"no"===s?(e("textarea#"+r).keydown(function(e){WP_User_Frontend.editorLimit.textareaLimit.call(this,e,t)}),e("textarea#"+r).on("paste",function(r){var s=e(this);setTimeout(function(){WP_User_Frontend.editorLimit.textareaLimit.call(s,r,t)},100)})):setTimeout(function(){tinyMCE.get(r).onKeyDown.add(function(e,r){WP_User_Frontend.editorLimit.tinymce.onKeyDown(e,r,t)}),tinyMCE.get(r).onPaste.add(function(e,r){setTimeout(function(){WP_User_Frontend.editorLimit.tinymce.onPaste(e,r,t)},100)})},1e3)},tinymce:{getStats:function(e){var t=e.getBody(),r=tinymce.trim(t.innerText||t.textContent);return{chars:r.length,words:r.split(/[\w\u2019\'-]+/).length}},onKeyDown:function(t,r,s){var n=WP_User_Frontend.editorLimit.tinymce.getStats(t).words-1;s?e(".mce-path-item.mce-last",t.container).html("Word Limit : "+n+"/"+s):"",s&&n>s&&(WP_User_Frontend.editorLimit.blockTyping(r),jQuery(".mce-path-item.mce-last",t.container).html(wpuf_frontend.word_limit))},onPaste:function(e,t,r){var s=e.getContent().split(" ").slice(0,r).join(" ");e.setContent(s),WP_User_Frontend.editorLimit.make_media_embed_code(s,e)}},textareaLimit:function(t,r){var s=e(this),n=s.val().split(" ");r&&n.length>r?(s.closest(".wpuf-fields").find("span.wpuf-wordlimit-message").html(wpuf_frontend.word_limit),WP_User_Frontend.editorLimit.blockTyping(t)):s.closest(".wpuf-fields").find("span.wpuf-wordlimit-message").html(""),"paste"===t.type&&s.val(n.slice(0,r).join(" "))},blockTyping:function(t){e.inArray(t.keyCode,[46,8,9,27,13,110,190,189])!==-1||65==t.keyCode&&t.ctrlKey===!0||t.keyCode>=35&&t.keyCode<=40||(t.preventDefault(),t.stopPropagation())},make_media_embed_code:function(t,r){e.post(ajaxurl,{action:"make_media_embed_code",content:t},function(e){r.setContent(r.getContent()+r.setContent(e))})}}},e(function(){if(WP_User_Frontend.init(),e("ul.wpuf-payment-gateways").on("click","input[type=radio]",function(t){e(".wpuf-payment-instruction").slideUp(250),e(this).parents("li").find(".wpuf-payment-instruction").slideDown(250)}),e("ul.wpuf-payment-gateways li").find("input[type=radio]").is(":checked")){var t=e("ul.wpuf-payment-gateways li").find("input[type=radio]:checked");t.parents("li").find(".wpuf-payment-instruction").slideDown(250)}else e("ul.wpuf-payment-gateways li").first().find("input[type=radio]").click()})}(jQuery,window);
//# sourceMappingURL=maps/frontend-form.min.js.map
