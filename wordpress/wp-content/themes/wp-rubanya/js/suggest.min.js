!function(e){e.suggest=function(t,l){function s(){var e=f.offset();m.css({top:e.top+t.offsetHeight+"px",left:e.left+"px"})}function n(e){if(/27$|38$|40$/.test(e.keyCode)&&m.is(":visible")||/^13$|^9$/.test(e.keyCode)&&o())switch(e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0,e.returnValue=!1,e.keyCode){case 38:d();break;case 40:p();break;case 9:case 13:h();break;case 27:m.hide()}else f.val().length!=v&&(C&&clearTimeout(C),C=setTimeout(a,l.delay),v=f.val().length)}function a(){var t,s,n=e.trim(f.val());l.multiple&&(t=n.lastIndexOf(l.multipleSep),-1!=t&&(n=e.trim(n.substr(t+l.multipleSep.length)))),n.length>=l.minchars?(cached=i(n),cached?c(cached.items):e.get(l.source,{q:n},function(e){m.hide(),s=u(e,n),c(s),r(n,s,e.length)})):m.hide()}function i(e){var t;for(t=0;t<g.length;t++)if(g[t].q==e)return g.unshift(g.splice(t,1)[0]),g[0];return!1}function r(e,t,s){for(var n;g.length&&S+s>l.maxCacheSize;)n=g.pop(),S-=n.size;g.push({q:e,size:s,items:t}),S+=s}function c(t){var n,a="";if(t){if(!t.length)return void m.hide();for(s(),n=0;n<t.length;n++)a+="<li>"+t[n]+"</li>";m.html(a).show(),m.children("li").mouseover(function(){m.children("li").removeClass(l.selectClass),e(this).addClass(l.selectClass)}).click(function(e){e.preventDefault(),e.stopPropagation(),h()})}}function u(t,s){var n,a,i=[],r=t.split(l.delimiter);for(n=0;n<r.length;n++)a=e.trim(r[n]),a&&(a=a.replace(new RegExp(s,"ig"),function(e){return'<span class="'+l.matchClass+'">'+e+"</span>"}),i[i.length]=a);return i}function o(){var e;return!!m.is(":visible")&&(e=m.children("li."+l.selectClass),e.length||(e=!1),e)}function h(){$currentResult=o(),$currentResult&&(l.multiple?(-1!=f.val().indexOf(l.multipleSep)?$currentVal=f.val().substr(0,f.val().lastIndexOf(l.multipleSep)+l.multipleSep.length)+" ":$currentVal="",f.val($currentVal+$currentResult.text()+l.multipleSep+" "),f.focus()):f.val($currentResult.text()),m.hide(),f.trigger("change"),l.onSelect&&l.onSelect.apply(f[0]))}function p(){$currentResult=o(),$currentResult?$currentResult.removeClass(l.selectClass).next().addClass(l.selectClass):m.children("li:first-child").addClass(l.selectClass)}function d(){var e=o();e?e.removeClass(l.selectClass).prev().addClass(l.selectClass):m.children("li:last-child").addClass(l.selectClass)}var f,m,C,v,g,S;f=e(t).attr("autocomplete","off"),m=e("<ul/>"),C=!1,v=0,g=[],S=0,m.addClass(l.resultsClass).appendTo("body"),s(),e(window).on("load",s).on("resize",s),f.blur(function(){setTimeout(function(){m.hide()},200)}),f.keydown(n)},e.fn.suggest=function(t,l){return t?(l=l||{},l.multiple=l.multiple||!1,l.multipleSep=l.multipleSep||",",l.source=t,l.delay=l.delay||100,l.resultsClass=l.resultsClass||"ac_results",l.selectClass=l.selectClass||"ac_over",l.matchClass=l.matchClass||"ac_match",l.minchars=l.minchars||2,l.delimiter=l.delimiter||"\n",l.onSelect=l.onSelect||!1,l.maxCacheSize=l.maxCacheSize||65536,this.each(function(){new e.suggest(this,l)}),this):void 0}}(jQuery);
//# sourceMappingURL=maps/suggest.min.js.map
