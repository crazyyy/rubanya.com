!function(i){var n={init:function(){i("input#wpuf-recuring-pay").on("click",this.showSubscriptionRecurring),i("input#wpuf-trial-status").on("click",this.showSubscriptionPack),i(".wpuf-coupon-info-wrap").on("click","a.wpuf-apply-coupon",this.couponApply),i(".wpuf-coupon-info-wrap").on("click","a.wpuf-copon-show",this.couponShow),i(".wpuf-coupon-info-wrap").on("click","a.wpuf-copon-cancel",this.couponCancel),i(".wpuf-assing-pack-btn").on("click",this.showPackDropdown),i(".wpuf-delete-pack-btn").on("click",this.deletePack),i(".wpuf-disabled-link").click(this.packAlert),this.changeExpirationFieldVisibility(":checkbox#wpuf-enable_post_expiration"),i(".wpuf-metabox-post_expiration").on("change",":checkbox#wpuf-enable_post_expiration",this.changeExpirationFieldVisibility),i(".wpuf-metabox-post_expiration").on("change","select#wpuf-expiration_time_type",this.setTimeExpiration)},packAlert:function(){alert("Please Cancel Your Currently Active Pack first ! ")},showPackDropdown:function(n){n.preventDefault();var e=i(this),o=e.parents(".wpuf-user-subscription"),p=o.find(".wpuf-pack-dropdown"),t=o.find(".wpuf-user-sub-info"),a=o.find(".wpuf-cancel-pack"),c=o.find(".wpuf-add-pack");"disabled"===p.attr("disabled")?(p.show().removeAttr("disabled"),t.hide().attr("disabled",!0),a.show(),c.hide()):(t.show().removeAttr("disabled"),p.hide().attr("disabled",!0),a.hide(),c.show())},deletePack:function(n){var e=i(n.target).attr("data-userid");i.post(ajaxurl,{action:"wpuf_delete_user_package",userid:e},function(e){e&&(i(".wpuf-user-sub-info").remove(),i(n.target).remove())})},couponCancel:function(n){n.preventDefault();var e=i(this),o={action:"coupon_cancel",_wpnonce:wpuf_frontend.nonce,pack_id:e.data("pack_id")},p=e.parents(".wpuf-coupon-info-wrap").find("input.wpuf-coupon-field");p.addClass("wpuf-coupon-field-spinner"),i.post(wpuf_frontend.ajaxurl,o,function(n){if(p.removeClass("wpuf-coupon-field-spinner"),n.success){i(".wpuf-pack-inner").html(n.data.append_data),i(".wpuf-coupon-id-field").val("");var o=e.closest(".wpuf-copon-wrap");o.hide(),o.siblings(".wpuf-copon-show").show()}})},couponShow:function(n){n.preventDefault();var e=i(this);e.hide(),e.parents(".wpuf-coupon-info-wrap").find(".wpuf-copon-wrap").show()},couponApply:function(n){n.preventDefault();var e=i(this),o=e.parents(".wpuf-coupon-info-wrap").find("input.wpuf-coupon-field"),p=o.val();if(""!==p){var t={action:"coupon_apply",_wpnonce:wpuf_frontend.nonce,coupon:p,pack_id:e.data("pack_id")};"disabled"===e.attr("disabled"),e.attr("disabled",!0),o.addClass("wpuf-coupon-field-spinner"),i.post(wpuf_frontend.ajaxurl,t,function(n){o.removeClass("wpuf-coupon-field-spinner"),n.success?(i(".wpuf-pack-inner").html(n.data.append_data),i(".wpuf-coupon-id-field").val(n.data.coupon_id),n.data.amount<=0&&i(".wpuf-nullamount-hide").hide()):i(".wpuf-subscription-error").html(n.data.message)})}},showSubscriptionRecurring:function(){var n=i(this),e=n.parents("table.form-table"),o=e.find(".wpuf-recurring-child"),p=e.find("input#wpuf-trial-status"),t=e.find(".wpuf-trial-child"),a=e.find(".wpuf-subcription-expire");n.is(":checked")?(p.is(":checked")&&t.show(),o.show(),a.hide()):(t.hide(),o.hide(),a.show())},showSubscriptionPack:function(){var n=i(this),e=n.closest("table.form-table").find(".wpuf-trial-child");n.is(":checked")?e.show():e.hide()},setTimeExpiration:function(n){var e={day:30,month:12,year:100};i("#wpuf-expiration_time_value").html("");for(var o=n.target?i(n.target).val():i(n).val(),p=1;p<=e[o];p++)i("#wpuf-expiration_time_value").append("<option>"+p+"</option>")},changeExpirationFieldVisibility:function(n){var e=i(n.target?n.target:n);e.is(":checked")?i(".wpuf_expiration_field").show():i(".wpuf_expiration_field").hide()}};"function"==typeof datepicker&&i(".wpuf-date-picker").datepicker({dateFormat:"yy-mm-dd"}),n.init()}(jQuery);
//# sourceMappingURL=maps/subscriptions.js.map
